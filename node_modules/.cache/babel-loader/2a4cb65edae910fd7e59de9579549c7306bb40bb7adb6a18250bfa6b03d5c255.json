{"ast":null,"code":"import axios from 'axios';\nexport default class Http {\n  constructor(baseURL) {\n    this.client = void 0;\n    this.client = axios.create({\n      baseURL: baseURL,\n      withCredentials: true\n    });\n  }\n  async fetch(url, options) {\n    this.client.defaults.headers.post['Content-Type'] = 'application/json';\n    const {\n      data,\n      method,\n      headers\n    } = options;\n    const request = {\n      url,\n      method,\n      headers: {\n        ...headers\n      },\n      data\n    };\n    let res;\n    try {\n      res = await this.client(request);\n      return res;\n    } catch (e) {\n      if (axios.isAxiosError(e)) {\n        var _e$response, _e$response$data;\n        const message = (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.message;\n        if (message) {\n          throw new Error(message);\n        }\n      }\n      throw new Error('Connect Error');\n    }\n  }\n  static getHttpInstance() {\n    if (!Http.instance) {\n      Http.instance = new Http(process.env.REACT_APP_BASE_URL);\n    }\n    return Http.instance;\n  }\n}\nHttp.instance = void 0;\nconst a = Http.getHttpInstance();","map":{"version":3,"names":["axios","Http","constructor","baseURL","client","create","withCredentials","fetch","url","options","defaults","headers","post","data","method","request","res","e","isAxiosError","message","response","Error","getHttpInstance","instance","process","env","REACT_APP_BASE_URL","a"],"sources":["/Users/ysy/projects/ticktickup-client/src/network/http.ts"],"sourcesContent":["import axios, {\n  AxiosError,\n  AxiosInstance,\n  AxiosInterceptorOptions,\n  AxiosRequestConfig,\n  AxiosResponse,\n} from 'axios';\n\nexport interface HttpInterface {\n  fetch: (\n    url: string,\n    options: AxiosRequestConfig\n  ) => Promise<AxiosResponse | AxiosError>;\n}\n\nexport default class Http implements HttpInterface {\n  private static instance: Http;\n  private readonly client: AxiosInstance;\n  private constructor(baseURL: string) {\n    this.client = axios.create({\n      baseURL: baseURL,\n      withCredentials: true,\n    });\n  }\n\n  async fetch(\n    url: string,\n    options: AxiosRequestConfig\n  ): Promise<AxiosResponse> {\n    this.client.defaults.headers.post['Content-Type'] = 'application/json';\n    const { data, method, headers } = options;\n    const request = {\n      url,\n      method,\n      headers: {\n        ...headers,\n      },\n      data,\n    };\n    let res: AxiosResponse;\n\n    try {\n      res = await this.client(request);\n      return res;\n    } catch (e) {\n      if (axios.isAxiosError(e)) {\n        const message = e.response?.data?.message;\n        if (message) {\n          throw new Error(message);\n        }\n      }\n      throw new Error('Connect Error');\n    }\n  }\n  public static getHttpInstance() {\n    if (!Http.instance) {\n      Http.instance = new Http(process.env.REACT_APP_BASE_URL as string);\n    }\n    return Http.instance;\n  }\n}\n\nconst a: HttpInterface = Http.getHttpInstance();\n"],"mappings":"AAAA,OAAOA,KAAK,MAML,OAAO;AASd,eAAe,MAAMC,IAAI,CAA0B;EAGzCC,WAAW,CAACC,OAAe,EAAE;IAAA,KADpBC,MAAM;IAErB,IAAI,CAACA,MAAM,GAAGJ,KAAK,CAACK,MAAM,CAAC;MACzBF,OAAO,EAAEA,OAAO;MAChBG,eAAe,EAAE;IACnB,CAAC,CAAC;EACJ;EAEA,MAAMC,KAAK,CACTC,GAAW,EACXC,OAA2B,EACH;IACxB,IAAI,CAACL,MAAM,CAACM,QAAQ,CAACC,OAAO,CAACC,IAAI,CAAC,cAAc,CAAC,GAAG,kBAAkB;IACtE,MAAM;MAAEC,IAAI;MAAEC,MAAM;MAAEH;IAAQ,CAAC,GAAGF,OAAO;IACzC,MAAMM,OAAO,GAAG;MACdP,GAAG;MACHM,MAAM;MACNH,OAAO,EAAE;QACP,GAAGA;MACL,CAAC;MACDE;IACF,CAAC;IACD,IAAIG,GAAkB;IAEtB,IAAI;MACFA,GAAG,GAAG,MAAM,IAAI,CAACZ,MAAM,CAACW,OAAO,CAAC;MAChC,OAAOC,GAAG;IACZ,CAAC,CAAC,OAAOC,CAAC,EAAE;MACV,IAAIjB,KAAK,CAACkB,YAAY,CAACD,CAAC,CAAC,EAAE;QAAA;QACzB,MAAME,OAAO,kBAAGF,CAAC,CAACG,QAAQ,oEAAV,YAAYP,IAAI,qDAAhB,iBAAkBM,OAAO;QACzC,IAAIA,OAAO,EAAE;UACX,MAAM,IAAIE,KAAK,CAACF,OAAO,CAAC;QAC1B;MACF;MACA,MAAM,IAAIE,KAAK,CAAC,eAAe,CAAC;IAClC;EACF;EACA,OAAcC,eAAe,GAAG;IAC9B,IAAI,CAACrB,IAAI,CAACsB,QAAQ,EAAE;MAClBtB,IAAI,CAACsB,QAAQ,GAAG,IAAItB,IAAI,CAACuB,OAAO,CAACC,GAAG,CAACC,kBAAkB,CAAW;IACpE;IACA,OAAOzB,IAAI,CAACsB,QAAQ;EACtB;AACF;AA7CqBtB,IAAI,CACRsB,QAAQ;AA8CzB,MAAMI,CAAgB,GAAG1B,IAAI,CAACqB,eAAe,EAAE"},"metadata":{},"sourceType":"module","externalDependencies":[]}